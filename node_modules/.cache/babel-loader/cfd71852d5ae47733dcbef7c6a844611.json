{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/86135/Desktop/sjsystem1/sj/sj1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/86135/Desktop/sjsystem1/sj/sj1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport EditDialog from '@/components/EditDialog.vue';\nimport { getDataShow } from '@/axios/api/api';\nimport { deleteData as _deleteData } from \"@/axios/api/api\";\nexport default {\n  components: {\n    EditDialog: EditDialog\n  },\n  data: function data() {\n    return {\n      search: '',\n      tableData: [],\n      dialogForm: {\n        scode: '',\n        sname: '',\n        sno: '',\n        classes: '',\n        Times: ''\n      },\n      dialogFormVisible: false,\n      centerDialogVisible: false,\n      isDelete: false,\n      DeleteForm: {\n        scode: '',\n        sname: '',\n        sno: '',\n        classes: '',\n        Times: ''\n      }\n    };\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    getData: function getData() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getDataShow();\n              case 2:\n                res = _context.sent;\n                console.log(res);\n                _this.tableData = res.data.data;\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    handleEdit: function handleEdit(index, row, scope) {\n      this.dialogForm = row;\n      console.log(row);\n    },\n    handleDelete: function handleDelete(index, row) {\n      this.DeleteForm = row;\n      console.log(index, row);\n    },\n    deleteData: function deleteData() {\n      var _this2 = this;\n      if (this.isDelete) {\n        _deleteData(this.DeleteForm).then(function (res) {\n          if (res) {\n            _this2.getData();\n            _this2.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n          }\n        });\n        this.isDelete = false;\n      } else {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      }\n    },\n    setDialog: function setDialog(val) {\n      this.dialogFormVisible = val;\n    },\n    searchName: function searchName(name) {\n      console.log(name);\n      var res = this.tableData.filter(function (item) {\n        return item.sname === name;\n      });\n      this.filterTableData = res;\n    }\n  },\n  computed: {\n    // 搜索含有关键字的数据\n    filterTableData: function filterTableData() {\n      var _this3 = this;\n      return this.tableData.filter(function (item) {\n        return item.sname.indexOf(_this3.search) !== -1;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;AAmEA;AACA;AACA;AAEA;EACAA;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;QACAR;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAK;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;cAAA;gBAAAC;gBACAC;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACAD;IACA;IACAE;MACA;MACAF;IACA;IACAG;MAAA;MACA;QAEAA;UACA;YACA;YACA;cACAC;cACAC;YACA;UACA;QACA;QACA;MACA;QAEA;UACAD;UACAC;QACA;MAEA;IACA;IACAC;MACA;IACA;IACAC;MACAP;MACA;QACA;MACA;MACA;IACA;EACA;EACAQ;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;EACA;AACA","names":["components","EditDialog","data","search","tableData","dialogForm","scode","sname","sno","classes","Times","dialogFormVisible","centerDialogVisible","isDelete","DeleteForm","created","methods","getData","getDataShow","res","console","handleEdit","handleDelete","deleteData","type","message","setDialog","searchName","computed","filterTableData"],"sourceRoot":"src/components","sources":["DataShow.vue"],"sourcesContent":["<template>\n  <el-card>\n    <div class=\"search-wrap\">\n      <el-input v-model=\"search\" placeholder=\"输入名字搜索\"/>\n      <el-button type=\"primary\" @click=\"searchName(search)\">搜索</el-button>\n    </div>\n\n    <el-table\n        :data=\"filterTableData\"\n        border\n        style=\"width: 100%\">\n      <el-table-column\n          prop=\"scode\"\n          label=\"序号\"\n          width=\"180\">\n      </el-table-column>\n      <el-table-column\n          prop=\"sname\"\n          label=\"姓名\"\n          width=\"180\">\n      </el-table-column>\n      <el-table-column\n          prop=\"sno\"\n          label=\"学号\">\n      </el-table-column>\n      <el-table-column\n          prop=\"classs\"\n          label=\"班级\">\n      </el-table-column>\n      <el-table-column\n          prop=\"Times\"\n          label=\"旷课次数\">\n      </el-table-column>\n      <el-table-column>\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\"\n                     size=\"mini\"\n                     @click=\"handleEdit(scope.$index, scope.row,scope);dialogFormVisible=true\">编辑\n          </el-button>\n          <el-button\n              type=\"danger\"\n              size=\"mini\"\n              @click=\"handleDelete(scope.$index, scope.row);centerDialogVisible=true;isDelete=true\">删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <EditDialog\n        :dialogFormVisible=\"dialogFormVisible\"\n        :dialog-form=\"dialogForm\"\n        :setDialog=\"setDialog\"\n    />\n    <el-dialog\n        title=\"提示\"\n        :visible.sync=\"centerDialogVisible\"\n        width=\"30%\"\n        center>\n      <span>确定删除吗？内容不可恢复</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"isDelete=false;centerDialogVisible = false;deleteData()\" >取 消</el-button>\n    <el-button type=\"primary\" @click=\"deleteData();centerDialogVisible = false;\">确 定</el-button>\n  </span>\n    </el-dialog>\n  </el-card>\n</template>\n\n<script>\nimport EditDialog from '@/components/EditDialog.vue'\nimport {getDataShow} from '@/axios/api/api'\nimport {deleteData} from \"@/axios/api/api\";\n\nexport default {\n  components: {EditDialog},\n  data() {\n    return {\n      search: '',\n      tableData: [],\n      dialogForm: {\n        scode: '',\n        sname: '',\n        sno: '',\n        classes: '',\n        Times: ''\n      },\n      dialogFormVisible: false,\n      centerDialogVisible: false,\n      isDelete: false,\n      DeleteForm: {\n        scode: '',\n        sname: '',\n        sno: '',\n        classes: '',\n        Times: ''\n      }\n    }\n  },\n  created() {\n    this.getData()\n  },\n  methods: {\n    async getData() {\n      let res = await getDataShow()\n      console.log(res)\n\n      this.tableData = res.data.data\n    },\n    handleEdit(index, row, scope) {\n      this.dialogForm = row\n      console.log(row)\n    },\n    handleDelete(index, row) {\n      this.DeleteForm = row\n      console.log(index, row)\n    },\n    deleteData() {\n      if (this.isDelete){\n\n        deleteData(this.DeleteForm).then(res => {\n          if (res){\n            this.getData()\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n          }\n        })\n        this.isDelete = false\n      }else {\n\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n\n      }\n    },\n    setDialog(val) {\n      this.dialogFormVisible = val\n    },\n    searchName(name) {\n      console.log(name)\n      let res = this.tableData.filter(item => {\n        return item.sname === name\n      })\n      this.filterTableData = res\n    }\n  },\n  computed: {\n    // 搜索含有关键字的数据\n    filterTableData() {\n      return this.tableData.filter((item) => {\n        return item.sname.indexOf(this.search) !== -1\n      })\n    }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.search-wrap {\n  width: 500px;\n  height: 50px;\n  display: flex;\n  margin-bottom: 10px;\n\n  .el-button {\n    width: 100px;\n    height: 40px;\n    margin-left: 50px;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}